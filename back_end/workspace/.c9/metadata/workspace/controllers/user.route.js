{"filter":false,"title":"user.route.js","tooltip":"/controllers/user.route.js","undoManager":{"mark":53,"position":53,"stack":[[{"start":{"row":0,"column":0},"end":{"row":50,"column":0},"action":"insert","lines":["//definição de constantes","const saltRounds = 10;","//rota inicial","","global.app.get('/template/index', function(req, res) {","    global.app.use(global.express.static('views'));","    global.app.use('/template', global.express.static('views/template'));","    res.sendFile(global.root + '/views/template/' + 'index.html');","});","","global.app.get('/user', function(req, res) {","    console.log('GET /');","    //leitura do ficheiro estático - view do user","    var html = global.fs.readFileSync('./views/user.view.html');","    res.writeHead(200, {","        'Content-Type': 'text/html'","    });","    res.end(html);","});","//rota de gravação","global.app.post('/save', function(req, res) {","    console.log('body: ' + JSON.stringify(req.body));","    //chamada da função save que está no user.model e envio dos parâmetros","    var name = global.connect.con.escape(req.body.name);","    var email = global.connect.con.escape(req.body.email);","    var pass = global.connect.con.escape(req.body.pass);","    console.log(\"without hahsh:\" + pass);","    global.bcrypt.hash(pass, saltRounds).then(function(hash) {","        console.log(\"with hash:\" + hash);","        global.modelUser.save(name, email, hash);","    });","","    //envio da mensagem de sucesso","    res.end('{\"success\" : \"Updated Successfully\", \"status\" : 200}');","});","//rota de leitura","global.app.get('/read', function(req, res) {","    //chamada da função read que está no user.model ","    global.modelUser.read(function(err, data) {","        if (err) {","            // error handling code goes here","            console.log(\"ERROR : \", err);","        }","        else {","            //envio para o cliente dos dados retornados pelo model","            res.send(data);","            res.end('{\"success\" : \"Updated Successfully\", \"status\" : 200}');","        }","    });","});",""],"id":1}],[{"start":{"row":4,"column":0},"end":{"row":8,"column":3},"action":"remove","lines":["global.app.get('/template/index', function(req, res) {","    global.app.use(global.express.static('views'));","    global.app.use('/template', global.express.static('views/template'));","    res.sendFile(global.root + '/views/template/' + 'index.html');","});"],"id":2}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["",""],"id":4}],[{"start":{"row":3,"column":0},"end":{"row":12,"column":3},"action":"remove","lines":["","global.app.get('/user', function(req, res) {","    console.log('GET /');","    //leitura do ficheiro estático - view do user","    var html = global.fs.readFileSync('./views/user.view.html');","    res.writeHead(200, {","        'Content-Type': 'text/html'","    });","    res.end(html);","});"],"id":5}],[{"start":{"row":15,"column":7},"end":{"row":16,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":18,"column":3},"end":{"row":19,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":19,"column":0},"end":{"row":32,"column":3},"action":"insert","lines":["global.app.post('/save', function(req, res) {","    console.log('body: ' + JSON.stringify(req.body));","    //chamada da função save que está no user.model e envio dos parâmetros","    var name = global.connect.con.escape(req.body.name);","    var email = global.connect.con.escape(req.body.email);","    var pass = global.connect.con.escape(req.body.pass);","    console.log(\"without hahsh:\" + pass);","    global.bcrypt.hash(pass, saltRounds).then(function(hash) {","        console.log(\"with hash:\" + hash);","        global.modelUser.save(name, email, hash);","    });","    //envio da mensagem de sucesso","    res.end('{\"success\" : \"Updated Successfully\", \"status\" : 200}');","});"],"id":8}],[{"start":{"row":19,"column":18},"end":{"row":19,"column":22},"action":"remove","lines":["save"],"id":9},{"start":{"row":19,"column":18},"end":{"row":19,"column":19},"action":"insert","lines":["u"]}],[{"start":{"row":19,"column":19},"end":{"row":19,"column":20},"action":"insert","lines":["p"],"id":10}],[{"start":{"row":19,"column":20},"end":{"row":19,"column":21},"action":"insert","lines":["d"],"id":11}],[{"start":{"row":19,"column":21},"end":{"row":19,"column":22},"action":"insert","lines":["a"],"id":12}],[{"start":{"row":19,"column":22},"end":{"row":19,"column":23},"action":"insert","lines":["t"],"id":13}],[{"start":{"row":19,"column":23},"end":{"row":19,"column":24},"action":"insert","lines":["e"],"id":14}],[{"start":{"row":19,"column":24},"end":{"row":19,"column":25},"action":"insert","lines":["/"],"id":15}],[{"start":{"row":19,"column":25},"end":{"row":19,"column":26},"action":"insert","lines":[":"],"id":16}],[{"start":{"row":19,"column":26},"end":{"row":19,"column":27},"action":"insert","lines":["i"],"id":17}],[{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"insert","lines":["d"],"id":18}],[{"start":{"row":19,"column":17},"end":{"row":19,"column":28},"action":"remove","lines":["/update/:id"],"id":19},{"start":{"row":19,"column":17},"end":{"row":19,"column":18},"action":"insert","lines":["u"]},{"start":{"row":19,"column":18},"end":{"row":19,"column":19},"action":"insert","lines":["s"]}],[{"start":{"row":19,"column":19},"end":{"row":19,"column":20},"action":"insert","lines":["e"],"id":20}],[{"start":{"row":19,"column":20},"end":{"row":19,"column":21},"action":"insert","lines":["r"],"id":21}],[{"start":{"row":19,"column":21},"end":{"row":19,"column":22},"action":"insert","lines":["/"],"id":22}],[{"start":{"row":19,"column":22},"end":{"row":19,"column":23},"action":"insert","lines":["u"],"id":23}],[{"start":{"row":19,"column":23},"end":{"row":19,"column":24},"action":"insert","lines":["p"],"id":24},{"start":{"row":19,"column":24},"end":{"row":19,"column":25},"action":"insert","lines":["d"]}],[{"start":{"row":19,"column":25},"end":{"row":19,"column":26},"action":"insert","lines":["a"],"id":25}],[{"start":{"row":19,"column":26},"end":{"row":19,"column":27},"action":"insert","lines":["t"],"id":26}],[{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"insert","lines":["e"],"id":27}],[{"start":{"row":34,"column":16},"end":{"row":34,"column":17},"action":"insert","lines":["u"],"id":28}],[{"start":{"row":34,"column":17},"end":{"row":34,"column":18},"action":"insert","lines":["s"],"id":29},{"start":{"row":34,"column":18},"end":{"row":34,"column":19},"action":"insert","lines":["a"]}],[{"start":{"row":34,"column":19},"end":{"row":34,"column":20},"action":"insert","lines":["r"],"id":30}],[{"start":{"row":34,"column":20},"end":{"row":34,"column":21},"action":"insert","lines":["/"],"id":31}],[{"start":{"row":34,"column":20},"end":{"row":34,"column":21},"action":"remove","lines":["/"],"id":32}],[{"start":{"row":34,"column":16},"end":{"row":34,"column":17},"action":"insert","lines":["/"],"id":33}],[{"start":{"row":34,"column":19},"end":{"row":34,"column":20},"action":"remove","lines":["a"],"id":34}],[{"start":{"row":34,"column":19},"end":{"row":34,"column":20},"action":"insert","lines":["e"],"id":35}],[{"start":{"row":19,"column":17},"end":{"row":19,"column":18},"action":"insert","lines":["/"],"id":36}],[{"start":{"row":5,"column":17},"end":{"row":5,"column":18},"action":"insert","lines":["/"],"id":37}],[{"start":{"row":5,"column":18},"end":{"row":5,"column":19},"action":"insert","lines":["u"],"id":38}],[{"start":{"row":5,"column":19},"end":{"row":5,"column":20},"action":"insert","lines":["s"],"id":39}],[{"start":{"row":5,"column":20},"end":{"row":5,"column":21},"action":"insert","lines":["r"],"id":40}],[{"start":{"row":5,"column":21},"end":{"row":5,"column":22},"action":"insert","lines":["e"],"id":41}],[{"start":{"row":5,"column":21},"end":{"row":5,"column":22},"action":"remove","lines":["e"],"id":42}],[{"start":{"row":5,"column":20},"end":{"row":5,"column":21},"action":"remove","lines":["r"],"id":43}],[{"start":{"row":5,"column":20},"end":{"row":5,"column":21},"action":"insert","lines":["e"],"id":44}],[{"start":{"row":5,"column":21},"end":{"row":5,"column":22},"action":"insert","lines":["r"],"id":45}],[{"start":{"row":19,"column":11},"end":{"row":19,"column":15},"action":"remove","lines":["post"],"id":46},{"start":{"row":19,"column":11},"end":{"row":19,"column":12},"action":"insert","lines":["p"]}],[{"start":{"row":19,"column":12},"end":{"row":19,"column":13},"action":"insert","lines":["u"],"id":47}],[{"start":{"row":19,"column":13},"end":{"row":19,"column":14},"action":"insert","lines":["t"],"id":48}],[{"start":{"row":32,"column":3},"end":{"row":48,"column":0},"action":"remove","lines":["","//rota de leitura","global.app.get('/user/read', function(req, res) {","    //chamada da função read que está no user.model ","    global.modelUser.read(function(err, data) {","        if (err) {","            // error handling code goes here","            console.log(\"ERROR : \", err);","        }","        else {","            //envio para o cliente dos dados retornados pelo model","            res.send(data);","            res.end('{\"success\" : \"Updated Successfully\", \"status\" : 200}');","        }","    });","});",""],"id":50}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":51}],[{"start":{"row":4,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["","//rota de leitura","global.app.get('/user/read', function(req, res) {","    //chamada da função read que está no user.model ","    global.modelUser.read(function(err, data) {","        if (err) {","            // error handling code goes here","            console.log(\"ERROR : \", err);","        }","        else {","            //envio para o cliente dos dados retornados pelo model","            res.send(data);","            res.end('{\"success\" : \"Updated Successfully\", \"status\" : 200}');","        }","    });","});",""],"id":52}],[{"start":{"row":19,"column":3},"end":{"row":20,"column":0},"action":"remove","lines":["",""],"id":53}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":14},"action":"remove","lines":["//rota inicial"],"id":54}],[{"start":{"row":1,"column":22},"end":{"row":2,"column":0},"action":"remove","lines":["",""],"id":55}]]},"ace":{"folds":[],"scrolltop":281,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":47,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":19,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1523740863980,"hash":"d8ab4589758267b31f7ed480ab988263479bbe1e"}